# ⛪ 教會服事安排管理系統 (Ministry Scheduler)

---

## 🎯 系統設計目標

* 協助主責處理服事安排的複雜度與多人協作需求

---

## 👥 系統角色

### 1. 主責 (Leader)

* 管理服事安排(多人協作)
* 審核請假申請、換服事請求
* 設定服事安排規則

### 2. 成員 (User)

* 查看個人與團隊的服事安排
* 申請請假、換服事
* 回應他人的換服事請求
* 整合 Google 行事曆
* 整合 Line 及時接收通知、發送/接受請求

---

## 📘 功能模組定義

### 📅 1. 服事安排總覽

**目的**：讓使用者能從不同角度快速理解當前服事安排情況
**參與者**：主責 / 成員
**功能描述**：

* 提供 4 種檢視模式：
  1. 個人檢視
  2. 團隊檢視
  3. 崗位檢視（可指定服事項目如音控、敬拜團等）
  4. 活動檢視（週六晚崇、主日、禱告會、SC等）
* 檢視中，每個服事項目皆顯示：活動名稱、時間、地點、崗位、人員、備註
* 支援搜尋與過濾條件（人員、時間、活動、崗位）

---

### 🗓️ 2. 請假申請機制

**目的**：避免將已請假的弟兄姊妹安排至服事
**參與者**：成員（申請）、主責（審核）
**流程說明**：

1. 成員提出請假申請，並說明原因
2. 主責審核通過後即生效，該成員在請假期間不可被安排服事，並有明確的視覺提示（灰階顯示＋說明原因）

---

### 🔄 3. 換服事請求系統

**目的**：讓成員能彈性調整服事安排，同時確保主責知情與服事表即時反映更新
**參與者**：成員（發送/接受）、主責（審核）
**功能邏輯**：

* 任何已被安排服事的成員可發起換服事請求：
  * 指定目標成員（單人、多選、或該崗位所有成員）
  * 系統發送請求通知至潛在替代者
* 替代者接受後，系統自動：
  * 通知主責進行審核
  * 換服事結果自動更新服事表並通知雙方
  * 取消先前發送給其他潛在替代者的通知
* 所有請求過程均有完整記錄追蹤（待回覆、已接受、已取消）

---

### ✅ 4. 服事安排條件與驗證

**目的**：確保服事安排的合理性，避免衝突情況
**參與者**：主責
**驗證規則**：

1. **崗位互斥規則**：同一場聚會中，同一成員不可同時負責多個崗位（如音控 + 小提琴）
2. **服事頻率規則**：如某成員每月最多服事兩次
3. **成員搭配規則**：某些特定成員不適合在同場一起服事
4. **系統提示設計**：
   * 服事安排介面中，不符條件的成員以紅字標示+衝突原因

**安排建議**：

1. **日期偏好建議**：依成員偏好，優先安排至其希望的日期 （有些人傾向在禮拜六服事）
2. **成員搭配建議**：根據搭配偏好，建議將某些特定成員安排在同一場次
3. **服事機會均衡建議**：優先安排近期尚未服事的成員，分散參與機會
4. **避免連續服事建議**：避免同一成員連續多場服事，減少疲勞
5. **新成員融入建議**：建議新成員與有經驗者同場，利於適應服事崗位

---

### 🤝 5. 多人協作機制

**目的**：支援多位主責同時修改服事表
**參與者**：主責

#### 協作版本管理

* **工作版本（Working）**：多位主責即時協作編輯，包含在線狀態、區塊提醒、意圖暫存、衝突處理、活動記錄、留言
* **發佈版本（Published）**：成員僅能查看已發佈的穩定版本，不會看到進行中的編輯內容

#### 協作功能

* **在線狀態**：顯示目前正在編輯的主責及其所在區塊
* **區塊提醒**：其他主責進入同區塊時顯示友善提醒，但不強制鎖定
* **意圖暫存**：可先暫存「計劃中」的變更讓其他主責看見，再正式確認保存
* **衝突處理**：當發生編輯衝突時（1分鐘內多人修改同一個欄位），系統提供完整資訊（最後編輯者、時間、差異內容），由主責選擇處理方式（協商討論/覆蓋/取消）
* **活動記錄**：時間軸顯示重要協作事件（暫存、覆蓋、協商、發佈）
* **修改通知**：修改他人先前安排時，需通知原編輯者（可選擇是否要再協商討論）

#### 發佈與版本控制

* **發佈流程**：協作達到穩定狀態時，可將工作版本轉為發佈版本
* **發佈條件檢查**：
  * 阻擋條件：未解決的錯誤、未處理的衝突、關鍵崗位人員不足
  * 警示條件：人員服事負荷偏高、人員分配不均等建議性提醒

---

### 🔔 6. 外部整合

#### Line Bot 整合（智慧服事助理）

> Line Bot 不只是單向通知工具，而是「服事小秘書」，能幫助成員與主責在日常中 **即時互動、快速回應、智慧提醒**。

📌 指令選單設計

提供常用操作的快捷鍵：

* 📅 **我的服事**
* 📊 **團隊服事**
* 🙋 **我要請假**
* 🔄 **發起換服事請求**
* 🔔 **公告通知**
* 📡 **即時狀態追蹤**

---

📢 提醒與通知

* **服事提醒**
  * 服事前 2 日：自動提醒當次服事的所有成員，附帶「確認出席」或「發起換服事請求」按鈕
  * 服事當日：再次提醒，附帶「集合時間 & 注意事項」

* **請假申請與審核**
  * 成員提出請假申請 → 即時通知主責
  * 主責審核完成 → 即時通知相關成員結果

* **換服事請求通知**
  * 成員發出換服事請求 → 通知目標對象
  * 任一人接受 → 通知主責進行審核，同時取消通知其他候選人
  * 主責審核完成 → 即時通知相關成員

* **服事安排異動通知**
  * 任何服事表更新 → 即時推送更新給受影響成員
  * 若更動較大（例如多個人員調整），附帶「變更摘要」卡片，清楚顯示前後差異

---

💬 互動操作

> 透過 **Line Flex Message 表單**，快速填寫，無需跳轉網頁。

🧑‍🤝‍🧑 成員 (User)

* 提交請假、換服事申請
* 同意 / 拒絕換服事請求（可填寫拒絕原因）

🧑‍💼 主責 (Leader)

* 審核各樣成員申請，並填寫注意事項或拒絕原因

---

🤔 自然語言查詢

成員可直接輸入文字，系統自動解析並回覆：

* 「我下週有服事嗎？」
* 「幫我看一下 10 月的安排」
* 「這週誰跟我一起服事？」

#### Google 行事曆整合

* **單向同步**：個人服事安排自動同步至 Google 行事曆（系統 → 行事曆）
* **同步範圍**：由系統自動建立、更新或取消行事曆事件
* **注意事項**：成員在行事曆中的變更不會回寫至系統

---

## 🎉 互動鼓勵模組

### 1. 成就系統

* 自動頒發服事成就徽章（如「初次服事」、「忠心服事者」、「連續服事」等）
* 成就展示於個人頁面與團隊榮譽牆

### 2. 服事統計

* 個人月度服事次數、服事類型分布、歷史參與記錄
* 團隊服事概況與個人服事貢獻統計報表

### 3. 感謝牆與關懷卡片

* 定期邀請弟兄姊妹撰寫匿名感謝小卡片（可自選感謝對象）
* 感謝內容展示於感謝牆頁面

### 4. 團隊公告欄

* 服事注意事項
* 重要通知
* 代禱事項

### 5. 服事見證與心得分享

---

## 📦 未來延伸功能規劃

* AI 智慧服事安排建議（根據歷史參與模式，自動生成服事安排建議）
