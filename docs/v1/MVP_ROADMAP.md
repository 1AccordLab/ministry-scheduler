# MVP 開發路線圖

## 專案分階段策略

### Linus 式開發哲學

「先讓基本功能能跑，再讓它跑得好，最後讓它跑得快。」

不要一開始就想做太多，專注於核心價值的實現。

## Phase 1: 核心 MVP (4-6 週)

### 目標

建立最基本但完整可用的服事安排系統，驗證核心價值。

### 核心功能清單

#### Week 1-2: 基礎架構與認證

- [ ] **資料庫設計與建立**
  - 核心表結構 (users, events, service_positions, event_services)
  - 基本索引策略
  - 資料庫遷移系統

- [ ] **基本認證系統**
  - 使用者登入/登出
  - 基本權限控制 (超管/主責/成員)
  - Session 管理

- [ ] **基礎 Web 架構**
  - Go HTTP server 設定
  - Templ 樣板引擎整合
  - 基本路由與中介軟體

#### Week 3-4: 核心 CRUD 功能

- [ ] **服事安排管理**
  - 建立/編輯/刪除活動
  - 新增/移除服事人員
  - 基本衝突檢查 (同人不能同時多崗位)

- [ ] **基礎檢視介面**
  - 個人服事時程檢視
  - 團隊服事檢視 (簡化版)
  - 基本搜尋與過濾

- [ ] **基礎驗證規則**
  - 崗位互斥檢查
  - 請假期間不可排班檢查

#### Week 5-6: 請假與換服事

- [ ] **請假申請系統**
  - 提出請假申請
  - 主責審核功能
  - 請假狀態顯示

- [ ] **換服事請求 (簡化版)**
  - 發起換服事請求
  - 目標人員回應
  - 主責最終審核

### MVP 驗收標準

1. 主責能成功安排一場主日服事
2. 成員能查看自己的服事時程
3. 請假機制正常運作
4. 基本權限控制正確
5. 沒有嚴重的資料完整性問題

## Phase 2: 外部整合 (3-4 週)

### 目標

整合外部服務，提升使用便利性。

#### Week 7-8: Line Bot 基礎功能

- [ ] **Line Bot 基本設定**
  - Webhook 處理
  - 基本指令選單
  - 使用者綁定機制

- [ ] **基本通知功能**
  - 服事前 2 日提醒
  - 請假申請結果通知
  - 換服事請求通知

#### Week 9-10: 進階整合

- [ ] **Google Calendar 同步**
  - OAuth 2.0 整合
  - 個人服事自動同步
  - 基本錯誤處理

- [ ] **簡化協作機制**
  - WebSocket 基礎設定
  - 「正在編輯」狀態提示
  - 樂觀鎖定機制

### Phase 2 驗收標準

1. Line Bot 能正確發送通知
2. 個人服事能同步到 Google 行事曆
3. 多人同時編輯不會造成資料錯亂

## Phase 3: 使用體驗優化 (2-3 週)

### 目標

優化使用者體驗，增加實用功能。

#### Week 11-12: UI/UX 優化

- [ ] **HTMX 動態更新**
  - 無刷新表單提交
  - 動態載入服事列表
  - 即時狀態更新

- [ ] **響應式設計**
  - 手機版介面優化
  - 平板適配
  - 基本可用性測試

#### Week 13: 互動鼓勵功能

- [ ] **基本成就系統**
  - 服事次數徽章
  - 個人統計頁面
  - 簡單感謝牆

### Phase 3 驗收標準

1. 手機使用體驗良好
2. 介面回應速度 < 200ms
3. 基本的使用者回饋機制運作

## 技術實作重點

### Phase 1 技術決策

```go
// 保持簡單的資料結構
type EventService struct {
    ID         int64
    EventID    int64
    PositionID int64
    UserID     int64
    Status     string
    CreatedAt  time.Time
    UpdatedAt  time.Time
}
```

### Phase 2 整合策略

```go
// Line Bot 處理器保持簡單
func (h *LineHandler) HandleMessage(event *linebot.MessageEvent) {
    switch text := event.Message.(type) {
    case *linebot.TextMessage:
        h.handleTextMessage(event.ReplyToken, text.Text)
    }
}
```

### Phase 3 前端策略

```html
<!-- 使用 HTMX 簡化前端邏輯 -->
<form hx-post="/services" hx-target="#service-list">
    <input name="user_id" />
    <input name="position_id" />
    <button type="submit">新增</button>
</form>
```

## 風險管控

### 高風險項目

1. **Line Bot API 整合** - 預留額外時間測試
2. **Google Calendar OAuth** - 提前準備測試帳號
3. **多人協作衝突** - 簡化為樂觀鎖定

### 應對措施

- 每個 Phase 結束都要有可用的版本
- 外部 API 整合都要有降級方案
- 資料庫遷移要能回滾

## 部署時程

### Phase 1 結束

- 部署到測試環境
- 小範圍使用者測試
- 收集基本回饋

### Phase 2 結束

- 生產環境部署
- 正式上線使用
- 監控系統穩定性

### Phase 3 結束

- 功能完整性驗收
- 效能最佳化
- 使用者訓練

## 成功指標

### 技術指標

- API 回應時間 < 200ms (95%)
- 系統可用性 > 99%
- 零嚴重資料完整性問題

### 業務指標

- 使用者能獨立完成基本操作
- 主責安排服事效率提升 50%
- Line 通知開啟率 > 80%

## 後續規劃 (Phase 4+)

### 可考慮的功能

- 多教會租戶系統
- 進階統計分析
- 自動排班建議
- 行動 App

### 技術債務處理

- 效能瓶頸最佳化
- 測試覆蓋率提升
- 文件完善
- 安全性加強

## 開發團隊建議

### 人力配置建議

- **1 名後端開發者** - 專注 Go API 開發
- **1 名全端開發者** - 負責前端與整合工作
- **1 名測試人員** - 負責功能測試與部署

### 工具與流程

- **版本控制**: Git + GitHub/GitLab
- **CI/CD**: GitHub Actions 或 GitLab CI
- **問題追蹤**: GitHub Issues 或 Jira
- **溝通工具**: Discord 或 Slack

### 程式碼品質

- 每個 PR 都要有程式碼審查
- 核心功能必須有測試覆蓋
- 遵循 Go 官方編碼規範
- 定期執行靜態分析工具

**記住 Linus 的話：「好的程式設計師擔心資料結構和它們的關係，而不是程式碼。」**

先把核心資料流做對，其他都是細節。
